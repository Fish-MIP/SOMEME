# Southern Ocean regional marine ecosystem model ensemble (SOMEME)
This repository contains all material necessary to reproduce the figures and results presented in the publication *"Addressing Key Uncertainties To Develop a Climate-Ready Southern Ocean Marine Ecosystem Model Ensemble"* led by Kieran Murphy. This manuscript will be published in the journal *Earth's Future*.  
  
## FishMIP model outputs
The Fisheries and Marine Ecosystem Model Intercomparison Project (FishMIP) group has outputs from [nine global ecosystem models](https://fishmip.org/modellingteams.html) available in the [German Climate Computing Center (DKRZ)](https://docs.dkrz.de/doc/getting_started/index.html) and via the [Inter-Sectoral Impact Model Intercomparison Project (ISIMIP) Data Portal](https://data.isimip.org/).  
  
Instructions on how to access data directly from the DKRZ server are available in the [ISIMIP website](https://www.isimip.org/dashboard/accessing-isimip-data-dkrz-server/).  
  
However, the FishMIP outputs extracted for the Southern Ocean from the DKRZ server using the [01_Extracting_tcb_fishmip.py](https://github.com/Fish-MIP/SOMEME/blob/main/scripts/01_Extracting_tcb_fishmip.py) script are publicly available in the [SOMEME folder](http://portal.sf.utas.edu.au/thredds/catalog/gem/fishmip/SOMEME/catalog.html) located in our THREDDS server. You can use all csv files in this folder to run all `R` scripts.  
  
In the same [SOMEME folder](http://portal.sf.utas.edu.au/thredds/catalog/gem/fishmip/SOMEME/catalog.html), you will also find a compressed folder called `outputs.zip`. The `outputs.zip` folder contains intermediary files and plots produced by all scripts in this repository. If you prefer, you can download this folder only (there is no need for you to download the csv files), and run the scripts. However, make sure you replace the `outputs` folder in this repository with the contents of `outputs.zip`.  
  
## How to use this repository?
The scripts in this repository are meant to be run sequentially following the order they appear in:
- [00_Creating_SO_masks](https://github.com/Fish-MIP/SOMEME/blob/main/scripts/00_Creating_SO_masks.qmd) - (`R` notebook) Creates the masks needed to extract data from FishMIP model outputs.  
- [01_Extracting_tcb_fishmip.py](https://github.com/Fish-MIP/SOMEME/blob/main/scripts/01_Extracting_tcb_fishmip.py) - (`Python` script) Extracts FishMIP model outputs (available in DKRZ) within the Southern Ocean boundaries.  
- [Fig1_Map_CCAMLR-MPA-mgt_MEASO](https://github.com/Fish-MIP/SOMEME/blob/main/scripts/Fig1_Map_CCAMLR-MPA-mgt_MEASO.md) - (`R` notebook) Creates a map of the CCMALR MPA planning domains and MEASO regions. This is used in the final composite script, so you need to run this before creating the three-panel figure.  
- [Fig2_Mapping_changes_SO](https://github.com/Fish-MIP/SOMEME/blob/main/scripts/Fig2_Mapping_changes_SO.md) - (`R` notebook) Calculates the model ensemble mean for percentage change in fish biomass by the end of the century under two emission scenarios. It also produces a map, which will be used in the three-panel figure. To run this script from the beginning, you must have downloaded all csv files from the [SOMEME folder](http://portal.sf.utas.edu.au/thredds/catalog/gem/fishmip/SOMEME/catalog.html) in THREDDS, which contain extracted data from FishMIP models. Alternatively, you can download only the `outputs.zip` folder from THREDDS and run the script from the [*Calculating FishMIP ensemble mean for total consumer biomass* section](https://github.com/Fish-MIP/SOMEME/blob/main/scripts/Fig2_Mapping_changes_SO.md#calculating-fishmip-ensemble-mean-for-total-consumer-biomass). **Remember**, you must compressed the folder and move its contents into the `outputs` folder within the project.  
- [Fig3_Plotting_tcb_change_SO](https://github.com/Fish-MIP/SOMEME/blob/main/scripts/Fig3_Plotting_tcb_change_SO.md) - (`R` notebook) Creates box plots for fish biomass percentage change across CCAMLR MPA planning domains by the end of the century under two scenarios. This will be used in the three-panel figure.  
- [Fig4_FishMIP_SO_models](https://github.com/Fish-MIP/SOMEME/blob/main/scripts/Fig4_FishMIP_SO_models.md) - (`R` notebook) Creates a map with all FishMIP regional models developed within the Southern Ocean boundaries. This figure is **not** used in the three-panel figure.  
- [Fig5_3panels_reg_change_deviation](https://github.com/Fish-MIP/SOMEME/blob/main/scripts/Fig5_3panels_reg_change_deviation.md) - (`R` notebook) Creates the three panel figure included in the publication. You need to run the scripts above to be able to create this figure.  

